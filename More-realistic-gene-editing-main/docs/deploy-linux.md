# Deployment Guide (Linux)

This guide outlines the steps to deploy QuantaMeet PQ to a production Linux server.

## 1. Prerequisites

- A Linux server (Ubuntu 22.04 recommended).
- A domain name pointing to your server's IP address.
- Docker and Docker Compose installed (use the `scripts/bootstrap-linux.sh` script).
- Certbot for obtaining TLS certificates.

## 2. Initial Setup

1.  **Clone the Repository:**

    ```bash
    git clone https://github.com/your-repo/quantameet-pq.git
    cd quantameet-pq
    ```

2.  **Configure Environment:**

    ```bash
    cp infra/compose/.env.example .env
    ```

    Edit `.env` and set strong, unique values for all secrets.

## 3. Obtain TLS Certificates

1.  **Stop any running webserver:**

    ```bash
    sudo systemctl stop nginx
    ```

2.  **Obtain the certificate:**

    ```bash
    sudo certbot certonly --standalone -d your-domain.com
    ```

## 4. Configure Nginx

1.  **Copy the Nginx configuration:**

    ```bash
    cp infra/gateway/nginx.conf /etc/nginx/sites-available/quantameet
    ```

2.  **Edit the configuration:**

    -   Replace `your-domain.com` with your actual domain.
    -   Update the `ssl_certificate` and `ssl_certificate_key` paths to point to the certificates generated by Certbot.

3.  **Enable the site:**

    ```bash
    sudo ln -s /etc/nginx/sites-available/quantameet /etc/nginx/sites-enabled/
    ```

## 5. Build and Run the Application

```bash
docker-compose -f infra/compose/docker-compose.yml up --build -d
```

## 6. Firewall Configuration

Ensure the following ports are open:

-   `80/tcp` (for HTTP and certbot)
-   `443/tcp` (for HTTPS)
-   `7880/tcp`, `7881/tcp`, `7882/tcp` (for LiveKit)
-   `50000-50100/udp` (for WebRTC media)
